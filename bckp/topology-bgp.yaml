name: two-router-bgp

mgmt:
  network: clab-mgmt
  ipv4-subnet: 172.31.255.0/24

topology:
  nodes:
    r1:
      kind: linux
      image: frrouting/frr:v7.5.1
      binds:
        - frr/r1/frr.conf:/etc/frr/frr.conf
      exec:
        - ip addr add 10.0.0.1/30 dev eth1
        - ip link set eth1 up
        - sed -i 's/bgpd=no/bgpd=yes/' /etc/frr/daemons
        - /usr/lib/frr/frrinit.sh start

    r2:
      kind: linux
      image: frrouting/frr:v7.5.1
      binds:
        - frr/r2/frr.conf:/etc/frr/frr.conf
      exec:
        - ip addr add 10.0.0.2/30 dev eth1
        - ip link set eth1 up
        - sed -i 's/bgpd=no/bgpd=yes/' /etc/frr/daemons
        - /usr/lib/frr/frrinit.sh start

  links:
    - endpoints: ["r1:eth1", "r2:eth1"]
